<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>富贵险中求 - 骰子走步局</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="hud">
        <div class="balance-pill">
            <span>💰</span> ¥<span id="score">10000</span>
        </div>
    </div>

    <div class="branding">
        <img src="https://s41.ax1x.com/2025/12/05/pZmPZPH.png" class="avatar" alt="捞鱼头像">
        <div class="brand-title">捞鱼制作</div>
        <div class="social-row">
            <a href="https://www.douyin.com/user/MS4wLjABAAAAyuCPebezrJtaj66VWDIFJSOw6XZgneF8yE_mfJAs0ME?from_tab_name=main"
                target="_blank" class="social-btn douyin" title="抖音">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path
                        d="M12.5 2c.3 2.3 1.7 4.1 4.5 4.3v3c-1.6.1-3-.5-4.5-1.5v6.7c0 8.5-9.3 11-13 4.8-2.4-4 .5-11 8-11.2v3.3c-.3 0-.6.1-.9.2-2.2.6-3.4 2.5-2.8 4.6.6 2 2.9 3.2 5 2.6 2-.5 3.2-2.3 3.2-4.8V2h4.5z" />
                </svg>
            </a>
            <a href="https://space.bilibili.com/523537443?spm_id_from=333.1007.0.0" target="_blank"
                class="social-btn bilibili" title="B站">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path
                        d="M17.8 6.2h-1.6L18 4.4c.3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0l-2.4 2.1h-5L7.1 3.3c-.3-.3-.8-.3-1.1 0-.3.3-.3.8 0 1.1l1.8 1.8H6.2C4.4 6.2 3 7.6 3 9.4v8.4c0 1.8 1.4 3.2 3.2 3.2h11.6c1.8 0 3.2-1.4 3.2-3.2V9.4c0-1.8-1.4-3.2-3.2-3.2zM9 15.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm6 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5z" />
                </svg>
            </a>
        </div>
    </div>

    <div id="game-board">
        <!-- Center Stage -->
        <div class="center-stage">
            <h2 id="msg" class="instruction-text">请选择前进方向</h2>

            <div class="dir-btn-group">
                <button class="neon-btn btn-cw" onclick="setDirection(1)">
                    <span>↻</span> 顺时针
                </button>
                <button class="neon-btn btn-ccw" onclick="setDirection(-1)">
                    <span>↺</span> 逆时针
                </button>
            </div>

            <div class="dice-area" id="dice-area">
                <div class="dice-row">
                    <div class="die-box" id="d1">?</div>
                    <div class="die-box" id="d2">?</div>
                    <div class="die-box" id="d3">?</div>
                    <div class="die-box" id="d4">?</div>
                    <div class="die-box" id="d5">?</div>
                </div>
                <button class="roll-btn" onclick="roll()">
                    摇骰子 ( -¥100 )
                </button>
            </div>
        </div>

        <!-- Cells generated by JS -->
    </div>

    <button class="reveal-btn" onclick="document.getElementById('reveal-modal').style.display='flex'">? 揭秘</button>
    <button class="stats-btn" onclick="openStats()">📊 数据模拟</button>

    <!-- Modals -->
    <div id="reveal-modal" class="overlay" onclick="if(event.target===this)this.style.display='none'">
        <div class="modal results-modal" style="text-align:left; line-height:1.6;">
            <h2 style="color:#333; text-align:center;">为什么你会输？</h2>
            <p>1. <strong>概率陷阱</strong>：5颗骰子点数和服从正态分布，极大概率落在 15-20 之间。</p>
            <p>2. <strong>精心布局</strong>：无论你选顺时针还是逆时针，从起点出发 15-20 步的落点，全部被安排了低奖金或陷阱。</p>
            <p>3. <strong>幸存者偏差</strong>：1000/6000元大奖看似近在咫尺，实际因步数概率几乎无法到达。</p>
            <div style="text-align:center; margin-top:20px;">
                <button class="restart-btn"
                    onclick="document.getElementById('reveal-modal').style.display='none'">我懂了</button>
            </div>
        </div>
    </div>

    <div id="result-modal" class="overlay">
        <div class="modal results-modal">
            <div id="res-title" class="win-title">WIN!</div>
            <div id="res-val" class="amount-display">+500</div>
            <button class="restart-btn" onclick="reset()">再来一局</button>
        </div>
    </div>

    <div id="stats-modal" class="overlay" onclick="if(event.target===this)this.style.display='none'">
        <div class="modal stats-modal-content">
            <h2 style="color:var(--neon-blue);">大数据模拟器</h2>
            <div class="sim-controls">
                <select id="sim-count" class="sim-select">
                    <option value="100">100次</option>
                    <option value="1000">1000次</option>
                    <option value="5000">5000次</option>
                </select>
                <select id="sim-strategy" class="sim-select">
                    <option value="random">随机方向</option>
                    <option value="cw">全选顺时针</option>
                    <option value="ccw">全选逆时针</option>
                </select>
                <button class="restart-btn" style="font-size:0.9rem; padding: 5px 15px;"
                    onclick="runSimulation()">开始模拟</button>
            </div>

            <div id="sim-results" style="display:none; text-align:left;">
                <table class="stats-table">
                    <tr>
                        <td>总局数</td>
                        <td id="stat-count">-</td>
                    </tr>
                    <tr>
                        <td>总投入</td>
                        <td id="stat-cost">-</td>
                    </tr>
                    <tr>
                        <td>总产出</td>
                        <td id="stat-revenue">-</td>
                    </tr>
                    <tr>
                        <td>净利润</td>
                        <td id="stat-profit" class="stats-profit">-</td>
                    </tr>
                    <tr>
                        <td>回报率</td>
                        <td id="stat-roi">-</td>
                    </tr>
                </table>
                <p style="font-size:0.8rem; color:#888; margin-top:10px; text-align:center;">*模拟使用真实游戏算法 (含杀数逻辑)</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>